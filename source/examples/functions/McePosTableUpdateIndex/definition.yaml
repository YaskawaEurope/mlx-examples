author: Rioual
comment: Update the PosTable Index
changelog:
  - version: 0.1.0
    date: 2022-03-03
    author: Rioual
    added:
      - "initial version"
var:
  - kind: input
    var:
      - name: PosTableMode
        description: |
          *PosTable* operation mode.
        type: SINT
        comment: PosTable operation mode [0=with blending, 1=not blending, 2=single motion (wait for step after each motion)]
        legend:
          "0" : "with blending"
          "1" : "not blending"
          "2" : "single motion (wait for step after each motion)"
      - name: FirstMove
        description: |
          Must be `True` when calculating the first motion of the *PosTable*.

          `False` otherwise.
        type: BOOL
        comment: Calc first move after system was reset
      - name: ReverseDirection
        description: |
          Invert the search direction of processing *PosTable*.
        type: BOOL
        comment: invert the direction of processing PosTable
  - kind: in_out
    var:
      - name: PosTable
        description:
        type: ExtPosTableData
        comment: PosTable to explore
      - name: QA
        description: |
          The *Queueing Amount* is the number of motions allowed to be queued.

          Queueing motion in advance is necessary for smooth motion.
        type: INT
        comment: allowed Queueing Amount; number of motions to queue (for smooth motion)
      - name: LastEntry
        description: |
          `True` if the last valid entry of the *PosTable* is in process.
        type: BOOL
        comment: last entry in process
      - name: StopEntry
        description: |
          `True` if the current entry of the *PosTable* ends in a standstill.
          This means that an *ActionID* will be performed at the end of motion.
        type: BOOL
        comment: entry with robot standstill (Action > 0) in process
      - name: Index
        description: |
          The *PosTable* index is updated by this function.
        type: INT
        comment: PosTable index for current motion
  - kind: var
    var:
      - name: PosTableSize
        type: INT
        comment: number of entries
      - name: EntriesRemaining
        type: INT
        comment: number of entries remaining
      - name: QAmax
        type: INT
        comment: max Queueing Amount; max number of motions which can be queued