author: Rioual
comment: Performed a trajectory stored in a PosTable
changelog:
  - version: 0.1.0
    date: 2022-03-03
    author: Rioual
    added:
      - "initial version"
var:
  - kind: in_out
    var:
      - name: stIO
        description: |
          Interface data for this function.

          Check the data type for more information.
        type: McePosTableIO
        comment: McePosTable IO variables
      - name: stMLX
      - name: stPosTable
      - name: stUserFrames
        description: |
          A collection of *User Frames* used by the *PosTable*.
        type: MceUserFrames
        comment: User frame data
      - name: stTools
        description: |
          A collection of *Tools* used by the *PosTable*.
        type: MceToolData
        comment: Tool data
  - kind: var
    var:
      - name: aMoveCmd
        type: ARRAY[0..2] OF MceCmdStatus
        comment: Status signals of mapped move instruction
      - name: aEnable
        type: ARRAY[0..2] OF BOOL
        comment: Enable mapped move instruction
      - name: nLoadIndex
        type: INT
        comment: PosTable index for loading next motion(s)
      - name: i
      - name: bLastEntry
        type: BOOL
        comment: Last entry in process
      - name: aRobotMoveAxisAbsolute
        type: ARRAY[0..2] OF MLxRobotMoveAxisAbsolute
        comment: Move to target absolute axis position using PTP motion.
      - name: aRobotMoveLinearAbsolute
        type: ARRAY[0..2] OF MLxRobotMoveLinearAbsolute
        comment: Move to target TCP position in straight-line motion.
      - name: aRobotSelectTool
        type: ARRAY[0..2] OF MLxRobotSelectTool
        comment: Select the tool
      - name: aRobotSetUserFrame
        type: ARRAY[0..2] OF MLxRobotSetUserFrame
        comment: Set the active User Frame for the Robot.
      - name: bFirstMove
      - name: aChangeTool
        type: ARRAY[0..2] OF BOOL
        comment: Change the tool for this mapped move
      - name: aChangeUserFrame
        type: ARRAY[0..2] OF BOOL
        comment: Change the user frame for this mapped move
      - name: bDefaultActionDone
        type: BOOL
        comment: Default action at standstill done
      - name: aUseMoveLinear
        type: ARRAY[0..2] OF BOOL
        comment: Use linear motion for this mapped move
      - name: nUserFrameNr
        type: DINT
      - name: nToolNr
        type: DINT
      - name: aSkipMotion
        type: ARRAY[0..2] OF BOOL
        comment: ActionID > 100 will skip the robot/axis motion and immediately perform the action
      - name: stStateMonitoringData
        type: MceStateMonitoringData
      - name: bReExecute
        type: BOOL
        comment: rising edge on bExecute
      - name: bReSystemReady
        type: BOOL
        comment: rising edge on bReSystemReady
      - name: bReStop
        type: BOOL
        comment: rising edge on bStop
      - name: bReReset
        type: BOOL
        comment: rising edge on bReset
      - name: bStopRequest
        type: BOOL
        comment: stop of PosTable requested
      - name: bResetRequest
        type: BOOL
        comment: reset of PosTable requested
      - name: bWaiting
        type: BOOL
      - name: bStopEntry
        type: BOOL
        comment: Entry with robot standstill (Action > 0) in process
      - name: aONS
        type: ARRAY[0..8] OF BOOL
        comment: Rising edge signals
      - name: aReEnable
        type: ARRAY[0..2] OF BOOL
        comment: rising edge on aEnable
      - name: bReRecalcQA
        type: BOOL
        comment: rising edge on bReRecalcQA
      - name: bReCmdEnable
        type: BOOL
        comment: rising edge on bCmdEnable
      - name: bFeCmdEnable
        type: BOOL
        comment: falling edge on bCmdEnable
      - name: bError
        type: BOOL
        comment: Active when any MotoLogix FB is in error
      - name: bLastMoveInProcess
        type: BOOL
        comment: last motion of the PosTable is running
      - name: bFeLastMoveInProcess
        type: BOOL
        comment: falling edge of bLastMoveInProcess
      - name: nPosTableSize
  - kind: constant
    var:
      - name: QAmax
        type: INT
        default_value: 2
        comment: max Queueing Amount, max number of motions which can be queued
      - name: ACTIONID_NO_ACTION
        type: SINT
        default_value: "0"
        comment: no action
      - name: ACTIONID_WAIT_STEPBUTTON
        type: SINT
        default_value: "1"
        comment: wait for step button
      - name: ACTIONID_WAIT_ONE_SCAN
        type: SINT
        default_value: 2
        comment: wait one PLC scan